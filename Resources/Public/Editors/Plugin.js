(()=>{var zt=Object.create;var gt=Object.defineProperty;var Ft=Object.getOwnPropertyDescriptor;var Vt=Object.getOwnPropertyNames;var qt=Object.getPrototypeOf,Tt=Object.prototype.hasOwnProperty;var yt=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,i)=>(typeof require<"u"?require:e)[i]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var Ht=(t,e)=>()=>(t&&(e=t(t=0)),e);var dt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),St=(t,e)=>{for(var i in e)gt(t,i,{get:e[i],enumerable:!0})},Nt=(t,e,i,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of Vt(e))!Tt.call(t,l)&&l!==i&&gt(t,l,{get:()=>e[l],enumerable:!(o=Ft(e,l))||o.enumerable});return t};var B=(t,e,i)=>(i=t!=null?zt(qt(t)):{},Nt(e||!t||!t.__esModule?gt(i,"default",{value:t,enumerable:!0}):i,t));function q(t){return(...e)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...e);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var Q=Ht(()=>{});var P=dt((Ne,Bt)=>{Q();Bt.exports=q("vendor")().React});var $=dt((je,Ct)=>{Q();Ct.exports=q("NeosProjectPackages")().NeosUiDecorators});var S=dt((Qe,vt)=>{Q();vt.exports=q("NeosProjectPackages")().ReactUiComponents});Q();var Gt=q("manifest");var T=B(P()),Zt=B($()),M=B(S());function wt(t){var e,i,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(i=wt(t[e]))&&(o&&(o+=" "),o+=i)}else for(i in t)t[i]&&(o&&(o+=" "),o+=i);return o}function jt(){for(var t,e,i=0,o="",l=arguments.length;i<l;i++)(t=arguments[i])&&(e=wt(t))&&(o&&(o+=" "),o+=e);return o}var p=jt;var z=B(P());var r={"--litefyrontrast-darkest":"--litefyr-style-a90-4q-litefyrontrast-darkest",secondaryGrid:"litefyr-style-a90-4q-secondaryGrid",gap2:"litefyr-style-a90-4q-gap2",rangeOutput:"litefyr-style-a90-4q-rangeOutput",buttonPreview:"litefyr-style-a90-4q-buttonPreview",checkboard:"litefyr-style-a90-4q-checkboard",bgBlue:"litefyr-style-a90-4q-bgBlue",bgViolet:"litefyr-style-a90-4q-bgViolet","--litefyrrimary-blue":"--litefyr-style-a90-4q-litefyrrimary-blue",secondaryControls:"litefyr-style-a90-4q-secondaryControls",primaryWrapper:"litefyr-style-a90-4q-primaryWrapper",itemsCenter:"litefyr-style-a90-4q-itemsCenter",headlineOutput:"litefyr-style-a90-4q-headlineOutput",primaryButtons:"litefyr-style-a90-4q-primaryButtons","--litefyrrimary-violet":"--litefyr-style-a90-4q-litefyrrimary-violet",wFull:"litefyr-style-a90-4q-wFull","--litefyr-primary-blue":"--litefyr-style-a90-4q-litefyr-primary-blue",rangeLabel:"litefyr-style-a90-4q-rangeLabel",rounded:"litefyr-style-a90-4q-rounded",flexColumn:"litefyr-style-a90-4q-flexColumn",p0:"litefyr-style-a90-4q-p0",clipPathOutput:"litefyr-style-a90-4q-clipPathOutput",rangeEnableLabel:"litefyr-style-a90-4q-rangeEnableLabel",textLeft:"litefyr-style-a90-4q-textLeft",range:"litefyr-style-a90-4q-range",outputContent:"litefyr-style-a90-4q-outputContent",previewOutput:"litefyr-style-a90-4q-previewOutput",radio:"litefyr-style-a90-4q-radio",flex:"litefyr-style-a90-4q-flex",rangeIcon:"litefyr-style-a90-4q-rangeIcon","--litefyrrimary-blue-hover":"--litefyr-style-a90-4q-litefyrrimary-blue-hover",checkboxGrid:"litefyr-style-a90-4q-checkboxGrid",fontOutput:"litefyr-style-a90-4q-fontOutput","--litefyrounded":"--litefyr-style-a90-4q-litefyrounded",srOnly:"litefyr-style-a90-4q-srOnly","--litefyrighlight":"--litefyr-style-a90-4q-litefyrighlight",highlight:"litefyr-style-a90-4q-highlight",checboxLabel:"litefyr-style-a90-4q-checboxLabel",hidden:"litefyr-style-a90-4q-hidden","--litefyrontrast-neutral":"--litefyr-style-a90-4q-litefyrontrast-neutral",primaryDisabled:"litefyr-style-a90-4q-primaryDisabled"};var Y=B(P());var Xt=B(S());var Wt="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var _=(t=21)=>{let e="",i=crypto.getRandomValues(new Uint8Array(t));for(;t--;)e+=Wt[i[t]&63];return e};function L({state:t,onCommit:e,property:i,enableProperty:o,label:l,min:n=0,max:g=100,step:d=1,minIcon:a,maxIcon:s,showValue:c=!1}){let h=_(),f=t[i],b=o?!!t[o]:!0,x=null;return c&&(x=typeof c=="function"?c(f):f),Y.default.createElement("div",{className:r.range},o&&Y.default.createElement("label",{className:p(r.rangeEnableLabel,r.checboxLabel)},Y.default.createElement(Xt.CheckBox,{onChange:X=>{e({[o]:X})},isChecked:b}),Y.default.createElement("span",null,l," ",x)),Y.default.createElement("label",{htmlFor:h,className:o?r.srOnly:r.rangeLabel},l," ",x),b&&Y.default.createElement("div",{className:p(r.flex,r.itemsCenter,r.gap2)},Y.default.createElement("div",{className:r.rangeIcon},a),Y.default.createElement("input",{type:"range",id:h,min:n,max:g,value:f,step:d,onChange:({target:X})=>{e({[i]:X.valueAsNumber})}}),Y.default.createElement("div",{className:r.rangeIcon},s)))}var G={};St(G,{AngleHigh:()=>le,AngleLow:()=>re,ArrowDown:()=>Rt,ArrowLeft:()=>Kt,ArrowRight:()=>$t,ArrowUp:()=>Et,Circle:()=>Qt,Mountain:()=>Ut,Peak:()=>_t,PeakHigh:()=>oe,PeakLow:()=>ie,Square:()=>Dt,Wave:()=>Mt,WaveHigh:()=>ee,WaveLow:()=>te});var m=B(P());function Dt({size:t=24}){return m.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t},m.default.createElement("rect",{strokeWidth:"2",fill:"none",stroke:"currentColor",x:"1",y:"1",width:"22",height:"22"}))}function Qt({size:t=24}){return m.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t},m.default.createElement("circle",{strokeWidth:"2",stroke:"currentColor",fill:"none",cx:"12",cy:"12",r:"11"}))}function Mt({size:t=24}){return m.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t},m.default.createElement("path",{fill:"none",fillRule:"nonzero",stroke:"currentcolor",strokeLinecap:"round",strokeWidth:"2",d:"M1 13.04l1.222 2.586c1.222 2.634 3.667 5.757 6.111 3.779 2.445-1.979 3.89-13.01 7.334-14.988 2.296-1.32 4.74 1.485 7.333 8.412"}))}function Ut({size:t=24}){return m.default.createElement("svg",{viewBox:"0 0 752 752",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",width:t,height:t},m.default.createElement("path",{d:"M409.71 224.23c-3.05.04-6.2 1.863-8.434 5.18l-84.949 145.77-25.16-43.363c-1.59-2.762-4.66-4.614-7.843-4.735-3.434-.136-6.868 1.758-8.586 4.735l-104.78 180.26c-5.64 9.367.43 15.703 9.027 15.688h396.03c6.59-.047 11.434-8.5 8.14-14.207l-165.46-284.15c-1.992-3.465-4.94-5.215-7.992-5.18zm-4.438 60.676a9.471 9.471 0 0 1 8.731 4.883l77.551 132.45v.004a9.516 9.516 0 0 1-3.406 13.023 9.516 9.516 0 0 1-13.023-3.406l-77.551-132.6h.004a9.473 9.473 0 0 1 7.695-14.356z",fillRule:"evenodd"}))}function Et({size:t=24}){return m.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",width:t,height:t},m.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19.5v-15m0 0l-6.75 6.75M12 4.5l6.75 6.75"}))}function Rt({size:t=24}){return m.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",width:t,height:t},m.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5L12 21m0 0l-7.5-7.5M12 21V3"}))}function Kt({size:t=24}){return m.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",width:t,height:t},m.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75"}))}function $t({size:t=24}){return m.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",width:t,height:t},m.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75"}))}function _t({size:t=24}){return m.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t},m.default.createElement("path",{fill:"none",fillRule:"nonzero",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 13.3142857L8 20 16 4 23 11.8857143"}))}function te({size:t=24}){return m.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t},m.default.createElement("path",{fill:"none",fillRule:"nonzero",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 13.247l1.833-.876c1.834-.876 5.5-2.63 9.167-2.339 3.667.312 7.333 2.613 9.167 3.801L23 15"}))}function ee({size:t=24}){return m.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t},m.default.createElement("path",{fill:"none",fillRule:"nonzero",stroke:"currentcolor",strokeLinecap:"round",strokeWidth:"2",d:"M1 13.736C2.04 11.933 3.09 5.049 4.146 5c.659.031 1.324 2.817 1.985 5.531.38 1.561.76 3.098 1.138 4.073 1.059 2.574 2.113.935 3.146-.868 1.057-1.803 2.113-3.442 3.146-3.491 1.055.049 2.114 1.688 3.146 4.36 1.052 2.573 2.09 6.178 3.147 5.244 1.05-.869 2.09-6.113 2.618-8.736L23 8.491"}))}function ie({size:t=24}){return m.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t},m.default.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"currentcolor",strokeLinecap:"round",strokeWidth:"2",d:"M5 16l14-7"}))}function oe({size:t=24}){return m.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t},m.default.createElement("path",{fill:"none",fillRule:"nonzero",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 21.3703704L4.66666667 7.51851852 8.33333333 21.3703704 12 4.25925926 15.6666667 19.7407407 19.3333333 1 23 23"}))}function re({size:t=24}){return m.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",fill:"currentColor",width:t,height:t},m.default.createElement("path",{d:"M316.3 79l15-28.3L274.7 20.7 259.7 49 56.5 433 31.7 480H84.8 480h32V416H480 137.9L316.3 79zM302.7 173l-22.8 43c22.5 17.9 42.3 38.9 58.8 62.5l40.8-25.3c-21.1-30.7-47.1-57.8-76.8-80.2zm82.3 211h49c-7-37-19.8-71.9-37.6-103.7l-40.8 25.3c13.3 24.2 23.3 50.5 29.4 78.3z"}))}function le({size:t=24}){return m.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor",width:t,height:t},m.default.createElement("path",{d:"M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64V448c0 17.7 14.3 32 32 32H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H64V64zM96 97.6v48.3c31 3.6 60.4 12.5 87.4 25.7l25.3-41.1C174.2 113 136.2 101.6 96 97.6zm115.2 89.7c32.6 21 60.5 48.9 81.5 81.5l40.9-25.2c-25-39-58.2-72.2-97.2-97.2l-25.2 40.9zM334.1 384h48.3c-4-40.2-15.4-78.2-32.9-112.6l-41 25.3c13.2 26.9 22 56.3 25.7 87.4z"}))}function et(t){let{width:e,height:i,offset:o,amplitude:l,frequency:n,points:g,phase:d,asyncPhaseEnable:a,asyncPhase:s}=t,c=g;c>6&&(c={7:100,8:150,9:200,10:300}[g]||300);let h=2*Math.PI*(n*-1)/c,f=d*Math.PI/180,b=Ot({scaledPoints:c,offset:o,amplitude:l,units:h,radPhase:f,height:i}),x=a?Ot({scaledPoints:c,offset:o,amplitude:l,units:h,radPhase:s*Math.PI/180,height:i}):b;return{...t,top:b,bottom:x}}function Ot({scaledPoints:t,offset:e,amplitude:i,units:o,radPhase:l,height:n}){let g=[];for(let d=0;d<=t;d++){let a=e+i*Math.cos(d*o+l),s=d*100/t,c=a/n*100;g.push(`${s.toFixed(2)}% ${c.toFixed(2)}%`)}return g.join(",")}function tt(t,e=!0){return e?`polygon(100% 100%,0% 100%,${t})`:`polygon(100% 0%,0% 0%,${t})`}function N({state:t,label:e,topColor:i,bottomColor:o}){let{width:l,height:n,top:g,bottom:d,asyncPhaseEnable:a}=t;if(!g||!d)return"";let s=`${l}  / ${n}`,c=`${n/l*-100}%`;return z.default.createElement("div",{className:p(r.checkboard,r.clipPathOutput)},z.default.createElement("div",{style:{position:"relative",zIndex:2}},z.default.createElement("div",{className:r.bgBlue,style:{backgroundColor:i,aspectRatio:s,clipPath:tt(g),marginBottom:"-1px"}}),z.default.createElement("h1",{style:{backgroundColor:i},className:p(r.outputContent,r.bgBlue)},e),z.default.createElement("div",{className:r.bgBlue,style:{backgroundColor:i,aspectRatio:s,clipPath:tt(d,!1)}})),a&&z.default.createElement("div",{style:{position:"relative",zIndex:1}},z.default.createElement("div",{className:r.bgViolet,style:{backgroundColor:o,aspectRatio:s,clipPath:tt(g),marginTop:c,marginBottom:"-1px",zIndex:-1}}),z.default.createElement("h1",{style:{backgroundColor:o},className:p(r.outputContent,r.bgViolet)},e),z.default.createElement("div",{className:r.bgViolet,style:{backgroundColor:o,aspectRatio:s,clipPath:tt(d,!1)}})))}var u=B(P());function it({state:t,onCommit:e,labels:i}){let o={wave:{min:u.default.createElement(G.WaveLow,null),max:u.default.createElement(G.WaveHigh,null)},peak:{min:u.default.createElement(G.PeakLow,null),max:u.default.createElement(G.PeakHigh,null)}};return u.default.createElement("div",{className:r.secondaryControls},u.default.createElement(L,{state:t,onCommit:e,property:"width",label:i.width,min:200,max:1400,minIcon:u.default.createElement("div",{className:p(r.flex)},u.default.createElement(G.ArrowRight,{size:"12"}),u.default.createElement(G.ArrowLeft,{size:"12"})),maxIcon:u.default.createElement("div",{className:p(r.flex)},u.default.createElement(G.ArrowLeft,{size:"12"}),u.default.createElement(G.ArrowRight,{size:"12"}))}),u.default.createElement(L,{state:t,onCommit:e,property:"height",label:i.height,min:20,max:500,minIcon:u.default.createElement("div",{className:p(r.flex,r.flexColumn)},u.default.createElement(G.ArrowDown,{size:"12"}),u.default.createElement(G.ArrowUp,{size:"12"})),maxIcon:u.default.createElement("div",{className:p(r.flex,r.flexColumn)},u.default.createElement(G.ArrowUp,{size:"12"}),u.default.createElement(G.ArrowDown,{size:"12"}))}),u.default.createElement(L,{state:t,onCommit:e,property:"offset",label:i.offset,min:1,max:250,minIcon:u.default.createElement(G.ArrowDown,null),maxIcon:u.default.createElement(G.ArrowUp,null)}),u.default.createElement(L,{state:t,onCommit:e,property:"amplitude",label:i.amplitude,min:1,max:200,minIcon:u.default.createElement(G.Mountain,null),maxIcon:u.default.createElement(G.Mountain,{size:"48"})}),u.default.createElement(L,{state:t,onCommit:e,property:"frequency",label:i.frequency,min:.1,max:10,step:.1,minIcon:o[t.points<7?"peak":"wave"].min,maxIcon:o[t.points<7?"peak":"wave"].max}),u.default.createElement(L,{state:t,onCommit:e,property:"points",label:i.points,min:1,max:10,step:1,minIcon:u.default.createElement(G.Peak,null),maxIcon:u.default.createElement(G.Wave,null)}),u.default.createElement(L,{state:t,onCommit:e,property:"phase",label:i.phase,min:-180,max:180,step:5,minIcon:u.default.createElement(G.AngleLow,null),maxIcon:u.default.createElement(G.AngleHigh,null)}),u.default.createElement(L,{state:t,onCommit:e,property:"asyncPhase",enableProperty:"asyncPhaseEnable",label:i.asyncPhase,min:-180,max:180,step:5,minIcon:u.default.createElement(G.AngleLow,null),maxIcon:u.default.createElement(G.AngleHigh,null)}))}var ne=(0,Zt.neos)(t=>({i18nRegistry:t.get("i18n"),secondaryEditorsRegistry:t.get("inspector").get("secondaryEditors")})),se={allowEmpty:!0,disabled:!1};function ae(t){let{allowEmpty:e,disabled:i,topColor:o,bottomColor:l}={...se,...t.options},{value:n,commit:g,highlight:d,i18nRegistry:a,renderSecondaryInspector:s,secondaryEditorsRegistry:c}=t;function h(x){g(x)}function f(){s("LITEFYR_CLIPPATH_EDIT",()=>null),g({...n,top:null,bottom:null})}function b(){let{component:x}=c.get("Litefyr.Style/ClipPathEditorWrap");s("LITEFYR_CLIPPATH_EDIT",()=>T.default.createElement(x,{onChange:h,value:n,topColor:o,bottomColor:l,i18nRegistry:a}))}return T.default.createElement("div",{className:p(r.primaryWrapper,i&&r.primaryDisabled)},n.top&&T.default.createElement("button",{type:"button",className:p(r.previewOutput,d&&r.highlight),onClick:b},T.default.createElement(N,{state:n,topColor:o,bottomColor:l}),T.default.createElement(M.Icon,{icon:"pencil",size:"5x",mask:["fas","circle"],transform:"shrink-8"})),T.default.createElement("div",{className:r.primaryButtons},T.default.createElement(M.IconButton,{className:p(!n.top&&d&&r.highlight),style:"lighter",icon:"pencil",title:"Edit",onClick:b}),e&&T.default.createElement(M.IconButton,{style:"lighter",icon:"times",title:"Reset",onClick:f})))}var ut=ne(ae);var H=B(P());function ot({onChange:t,value:e,topColor:i,bottomColor:o,i18nRegistry:l}){let[n,g]=(0,H.useState)({width:1200,height:140,offset:70,amplitude:60,frequency:1.5,points:7,phase:0,asyncPhaseEnable:!1,asyncPhase:0,top:null,bottom:null});function d({width:c,height:h,offset:f,amplitude:b,frequency:x,points:X,phase:w,asyncPhaseEnable:W,asyncPhase:k}){c==null&&(c=n.width),h==null&&(h=n.height),f==null&&(f=n.offset),b==null&&(b=n.amplitude),x==null&&(x=n.frequency),X==null&&(X=n.points),w==null&&(w=n.phase),W==null&&(W=!!n.asyncPhaseEnable),k==null&&(k=n.asyncPhase);let V=et({width:c,height:h,offset:f,amplitude:b,frequency:x,points:X,phase:w,asyncPhaseEnable:W,asyncPhase:k});g(V),t(V)}(0,H.useEffect)(()=>{let c=et({...n,...e});g(c),(!e.top||!e.bottom)&&t(c)},[]);let a=["content","width","height","offset","amplitude","frequency","points","phase","asyncPhaseEnable","asyncPhase"],s={};return a.forEach(c=>{s[c]=l.translate(`Litefyr.Style:NodeTypes.Mixin.Visuals.ClipPath:editor.${c}`)}),H.default.createElement("div",{className:r.secondaryGrid},H.default.createElement(it,{state:n,onCommit:d,labels:s}),H.default.createElement(N,{state:n,label:s.content,topColor:i,bottomColor:o}))}var J=B(P()),At=B($()),j=B(S());var ce=(0,At.neos)(t=>({i18nRegistry:t.get("i18n"),config:t.get("frontendConfiguration").get("LitefyrStyleEditorsFont"),secondaryEditorsRegistry:t.get("inspector").get("secondaryEditors")})),ge={type:"main",allowEmpty:!1,disabled:!1,roundedButton:0,colors:[],mainFont:{}};function ye(t){let e={...ge,...t.config,...t.options},{value:i,commit:o,highlight:l,i18nRegistry:n,renderSecondaryInspector:g,secondaryEditorsRegistry:d}=t,{allowEmpty:a,disabled:s}=e;function c(b){if(b){o(b);return}o({})}function h(){g("LITEFYR_FONT_EDIT",()=>null),o({})}function f(){let{component:b}=d.get("Litefyr.Style/FontEditorWrap");g("LITEFYR_FONT_EDIT",()=>J.default.createElement(b,{onChange:c,value:i,options:e,i18nRegistry:n}))}return J.default.createElement("div",{className:p(r.primaryButtons,s&&r.primaryDisabled)},J.default.createElement(j.Button,{onClick:f,style:"lighter",className:p(r.wFull,r.textLeft,r.rounded,l&&r.highlight)},J.default.createElement(j.Icon,{icon:"pencil",size:"1x",padded:"right"}),i.font),a&&J.default.createElement(j.IconButton,{style:"lighter",icon:"times",title:"Reset",onClick:h}))}var bt=ce(ye);var F=B(P());var I=B(P());var D=B(P());var Pt=B(S());function U({value:t,label:e,min:i=0,max:o=100,step:l=1,onChange:n,onReset:g}){let d=_();return D.default.createElement("div",{className:r.range},D.default.createElement("label",{htmlFor:d,className:r.flex},e,": ",t),D.default.createElement("div",{className:p(r.flex,r.itemsCenter,r.gap2)},D.default.createElement("input",{type:"range",id:d,min:i,max:o,value:t,step:l,onChange:({target:a})=>n(a.valueAsNumber)}),g&&D.default.createElement(Pt.IconButton,{style:"lighter",icon:"times",title:"Reset",onClick:g})))}var R=B(S());var ft;async function de(t,e={}){let{folder:i,fonts:o}=e,l=o[t];if(!ft){await import("/_Resources/Static/Packages/Litefyr.Style/Editors/Inflate.js"),await import("/_Resources/Static/Packages/Litefyr.Style/Editors/Unbrotli.js");let{Font:d}=await import("/_Resources/Static/Packages/Litefyr.Style/Editors/FontLib.js");ft=d}let n=null;l.fontWeight&&typeof l.fontWeight!="string"&&(n=Array.isArray(l.fontWeight)?l.fontWeight:[l.fontWeight]);let g=l?.filepath;if(!g){let d=n?`${t}-${n[0]}`:t;g=`${i}/${d}.woff2`}return new Promise((d,a)=>{let s=new ft(t);s.onerror=c=>a(c),s.onload=async c=>{let h=await ue(c);h.fontWeight.options=n,d(h)},s.src=g})}function ue(t){let e=t.detail.font,i=!!e.opentype.tables.fvar,o=[],l=e.opentype.tables.GSUB;l&&(l.getSupportedScripts().forEach(a=>{let s=l.getScriptTable(a);l.getSupportedLangSys(s).forEach(h=>{let f=l.getLangSysTable(a,h);o=[...o,...l.getFeatures(f).map(b=>b.featureTag)]})}),o=[...new Set(o)]);let n={},g={options:null,range:null};if(i){let d=e.opentype.tables.fvar.getSupportedAxes(),a=e.opentype.tables.fvar.axes;a=a.filter(s=>d.includes(s.tag)),a.forEach(s=>{if(s.tag==="wght"){g.range={min:s.minValue,max:s.maxValue,default:s.defaultValue};return}n[s.tag]={tag:s.tag,min:s.minValue,max:s.maxValue,default:s.defaultValue}})}return{fontFeatureSettings:o,fontVariationSettings:n,variable:i,fontWeight:g}}var E=de;function lt({i18nRegistry:t,state:e,onCommit:i,config:o,setRangePreview:l,allowEmpty:n=!0,enableBold:g=!0}){let{fonts:d}=o,a=[];for(let y in d)a.push({value:y,label:y,group:d[y].group});let s=e?.features?.fontVariationSettings||{};function c(y,v){let C=k();C.fontVariationSettings[y]=v;let A=rt(C);i({userSettings:C,style:A})}let h=e?.features?.fontFeatureSettings||[];function f(y,v){let C=k(),A=C.fontFeatureSettings;v?A.push(y):A=A.filter(ct=>ct!==y),C.fontFeatureSettings=[...new Set(A)];let K=rt(C);i({userSettings:C,style:K})}let b=e?.features?.variable,x=b?e?.features?.fontWeight?.range:null,X=b?[]:e?.features?.fontWeight?.options,w=X&&X.length>1?X:null;function W(y,v){let C=JSON.parse(JSON.stringify(e.userSettings));C.fontWeight[y]=v;let A=rt(C);i({userSettings:C,style:A})}let k=()=>JSON.parse(JSON.stringify(e.userSettings)),V=["characterListing","typeface","normalFontWeight","boldFontWeight"],Z={};return V.forEach(y=>{Z[y]=t.translate(`Litefyr.Style:NodeTypes.Mixin.Fonts:editor.${y}`)}),I.default.createElement("div",{className:r.secondaryControls,style:{maxWidth:"300px"}},I.default.createElement("label",{className:p(r.checboxLabel)},I.default.createElement(R.CheckBox,{onChange:l,isChecked:!!e?.rangePreview}),I.default.createElement("span",null,Z.characterListing)),I.default.createElement("div",{className:p(r.flex,r.flexColumn,r.gap2)},I.default.createElement("div",null,Z.typeface),I.default.createElement(R.SelectBox,{allowEmpty:n,displaySearchBox:!1,options:a,value:e.font,onValueChange:async y=>{if(!y){i();return}let v=await E(y,o),C=v.fontWeight,A=v.variable,K=A?C.range.default:C.options[0],ct=A?Lt(K,C.range.max):C.options[C.options.length-1],It={font:y,variable:A,fontVariationSettings:be(v.fontVariationSettings),fontFeatureSettings:[],fontWeight:{normal:K,bold:ct}},Yt=rt(It);i({font:y,features:v,userSettings:It,style:Yt})}})),x&&I.default.createElement(I.default.Fragment,null,I.default.createElement(U,{min:x.min,max:x.max,value:e.userSettings.fontWeight.normal,label:Z.normalFontWeight,step:5,onChange:y=>W("normal",y),onReset:()=>W("normal",x.default)}),g&&I.default.createElement(U,{min:x.min,max:x.max,value:e.userSettings.fontWeight.bold,label:Z.boldFontWeight,step:5,onChange:y=>W("bold",y),onReset:()=>W("bold",Lt(x.default,x.max))})),w&&I.default.createElement(I.default.Fragment,null,I.default.createElement("div",{className:p(r.flex,r.flexColumn,r.gap2)},I.default.createElement("div",null,Z.normalFontWeight),w.map(y=>I.default.createElement("label",{className:r.radio},I.default.createElement("input",{type:"radio",name:"weightNormal",value:y,checked:e.userSettings.fontWeight.normal==y,onChange:()=>W("normal",y)}),I.default.createElement("span",null),y))),g&&I.default.createElement("div",{className:p(r.flex,r.flexColumn,r.gap2)},I.default.createElement("div",null,Z.boldFontWeight),w.map(y=>I.default.createElement("label",{className:r.radio},I.default.createElement("input",{type:"radio",name:"weightBold",value:y,checked:e.userSettings.fontWeight.bold==y,onChange:()=>W("bold",y)}),I.default.createElement("span",null),y)))),Object.entries(s).map(([y,v])=>I.default.createElement(U,{min:v.min,max:v.max,value:e.userSettings.fontVariationSettings[y],label:y,step:1,onChange:C=>c(y,C),onReset:()=>c(y,v.default)})),I.default.createElement("div",{className:r.checkboxGrid},h.map(y=>I.default.createElement("label",{className:p(r.checboxLabel)},I.default.createElement(R.CheckBox,{onChange:v=>f(y,v),isChecked:e.userSettings.fontFeatureSettings.includes(y)}),I.default.createElement("span",null,y)))))}function be(t){let e={};for(let i in t){let o=t[i];e[i]=o.value||o.default}return e}function Lt(t,e){return Math.min(t+300,e)}function rt({font:t,fontVariationSettings:e,fontFeatureSettings:i,fontWeight:o}){let l={fontFamily:t,fontWeight:o.normal,fontFeatureSettings:i&&i.length?i.map(g=>`"${g}"`).join(","):"normal"},n=[];return Object.entries(e).forEach(([g,d])=>{n.push(`"${g}" ${d}`)}),l.fontVariationSettings=n.length?n.join(","):"normal",{normal:l,bold:{fontWeight:o.bold}}}function nt(t={},e=!0){let{fonts:i,fallback:o,folder:l}=t,n=({font:a,filepath:s,weight:c,fixedWeight:h=!1})=>{if(!s){let x=h&&c?`${a}-${c}`:a;s=`${l}/${x}.woff2`}let f=s.split(".").pop(),b=c?`font-weight:${c};`:"";return`@font-face{font-family:${a};${b}font-style:normal;font-display:swap;src:url("${s}") format("${f}")}`},g="";return Object.keys(i).map(a=>{let{filepath:s,fontWeight:c,group:h}=i[a],f="";if(Array.isArray(c)?c.forEach(b=>{f+=n({font:a,filepath:s,weight:b,fixedWeight:!0})}):typeof c=="number"?f+=n({font:a,filepath:s,weight:c,fixedWeight:!0}):f+=n({font:a,filepath:s,weight:c,fixedWeight:!1}),e){let b=`'${a}', ${o[h]}`;g+=`span[title="${a}"],.font-${a}{font-family:${b}}`}return f}).join("")+g}var O=B(P()),kt=B($());var pt={"--tw-text-c":"--litefyr-style-1PBTPq-tw-text-c","--tw-bg-l-offset":"--litefyr-style-1PBTPq-tw-bg-l-offset","btn--theme":"litefyr-style-1PBTPq-btn--theme","--color-back-h":"--litefyr-style-1PBTPq-color-back-h","--color-back-l":"--litefyr-style-1PBTPq-color-back-l","--color-accent-l":"--litefyr-style-1PBTPq-color-accent-l","btn--ghost":"litefyr-style-1PBTPq-btn--ghost","--f-sm":"--litefyr-style-1PBTPq-f-sm","btn--block":"litefyr-style-1PBTPq-btn--block","--tw-bg-l":"--litefyr-style-1PBTPq-tw-bg-l","--fluid-bp":"--litefyr-style-1PBTPq-fluid-bp","--font-button":"--litefyr-style-1PBTPq-font-button","--font-button--variation":"--litefyr-style-1PBTPq-font-button--variation","--tw-bg-opacity":"--litefyr-style-1PBTPq-tw-bg-opacity","--color-front-c":"--litefyr-style-1PBTPq-color-front-c","--tw-text-opacity":"--litefyr-style-1PBTPq-tw-text-opacity","--tw-content":"--litefyr-style-1PBTPq-tw-content",btn:"litefyr-style-1PBTPq-btn","--tw-text-l-offset":"--litefyr-style-1PBTPq-tw-text-l-offset","--rounded-button":"--litefyr-style-1PBTPq-rounded-button","--color-accent-c":"--litefyr-style-1PBTPq-color-accent-c","--tw-bg-h":"--litefyr-style-1PBTPq-tw-bg-h","--tw-text-h":"--litefyr-style-1PBTPq-tw-text-h","btn--link":"litefyr-style-1PBTPq-btn--link","--color-front-l":"--litefyr-style-1PBTPq-color-front-l","btn--inline":"litefyr-style-1PBTPq-btn--inline","--tw-text-l":"--litefyr-style-1PBTPq-tw-text-l","--tw-bg-c":"--litefyr-style-1PBTPq-tw-bg-c","btn--big-area":"litefyr-style-1PBTPq-btn--big-area","--color-back-c":"--litefyr-style-1PBTPq-color-back-c","--color-accent-h":"--litefyr-style-1PBTPq-color-accent-h","--font-button--feature":"--litefyr-style-1PBTPq-font-button--feature","--font-weight-bold":"--litefyr-style-1PBTPq-font-weight-bold","--color-front-h":"--litefyr-style-1PBTPq-color-front-h","--btn-bg":"--litefyr-style-1PBTPq-btn-bg","--btn-text":"--litefyr-style-1PBTPq-btn-text"};var fe=(0,kt.neos)(t=>({colorConfig:t.get("frontendConfiguration").get("CarbonTailwindColors")})),ht=fe(pe);function pe({text:t,style:e,type:i,colorConfig:o,colors:l}){let n=mt(t,"blockquote").map(({tagName:a,text:s})=>({tagName:a,text:mt(s,"strong")})),g=mt(t,"strong"),d=i==="button";return l=l.filter(a=>!!a),O.default.createElement(O.Fragment,null,d&&O.default.createElement("div",{className:r.buttonPreview},l.map((a,s)=>O.default.createElement("button",{key:s,type:"button","data-theme":"main",style:{...e.normal,cursor:"auto",backgroundColor:a,color:"white"},class:p(pt.btn,pt["btn--inline"])},t))),!d&&O.default.createElement("div",{style:e.normal},n.map(({tagName:a,text:s},c)=>a==="blockquote"?O.default.createElement("blockquote",{key:c},s.map(({tagName:h,text:f},b)=>h==="strong"?O.default.createElement("strong",{key:b,style:e.bold},st(f)):st(f))):s.map(({tagName:h,text:f},b)=>h==="strong"?O.default.createElement("strong",{key:b,style:e.bold},st(f)):st(f)))))}function st(t){return t.split(/<br\s*\/?>/gi).map((e,i)=>O.default.createElement(O.Fragment,{key:i},i!==0&&O.default.createElement("br",null),e))}function mt(t,e="strong"){let i=[],o=`</${e}>`;return t.split(`<${e}>`).forEach(l=>{if(l.includes(o)){let[n,g]=l.split(o);n&&i.push({tagName:e,text:n}),g&&i.push({tagName:null,text:g});return}l&&i.push({tagName:null,text:l})}),i}function at({onChange:t,value:e,options:i,i18nRegistry:o}){let[l,n]=(0,F.useState)({font:null,features:{},userSettings:{},style:{},rangePreview:!1});function g(w){if(!w){let v={font:null,features:{},userSettings:{},style:{normal:{},bold:{}},rangePreview:l.rangePreview};n(v),t();return}let{font:W,features:k,userSettings:V,style:Z}=w;W==null&&(W=l.font),k==null&&(k=l.features),V==null&&(V=l.userSettings),Z==null&&(Z=l.style);let y=l.rangePreview;n({font:W,features:k,userSettings:V,style:Z,rangePreview:y}),t({font:W,userSettings:V,style:Z})}function d(w){n({...l,rangePreview:!!w})}(0,F.useEffect)(()=>{async function w(){if(e?.font){let W=await E(e.font,i);n({...l,...e,features:W})}}w()},[]);let a="litefyr-font-preview",s=(()=>{let w=i?.roundedButton||0;return w>=26?"9999px":w/16+"rem"})(),c=`.${a} button{border-radius:${s} !important}`,h=nt(i),f=i.type!=="button",b=l.rangePreview?"range":i.type,x=i?.mainFont?.style?me(i.mainFont.style,a):"",X=o.translate(`Litefyr.Style:NodeTypes.Mixin.Fonts:editor.preview.${b}`);return F.default.createElement("div",{className:r.secondaryGrid},F.default.createElement("style",null,x,h,c),F.default.createElement(lt,{state:l,onCommit:g,config:i,setRangePreview:d,enableBold:f,allowEmpty:i.allowEmpty,i18nRegistry:o}),F.default.createElement("div",{className:p(a,r[b+"Output"],r.fontOutput)},F.default.createElement(ht,{text:X,style:l.style,type:i.type,colors:i?.colors})))}function me({normal:t,bold:e},i){if(!t)return"";let o=[`font-family:${t.fontFamily}`,`font-weight:${t.fontWeight}`,`font-feature-settings:${t.fontFeatureSettings}`,`font-variation-settings:${t.fontVariationSettings}`].join(";"),l=`font-weight:${e.fontWeight}`;return`.${i}{${o}}.${i} strong{${l}}`}Gt("Litefyr.Style:Editors",{},t=>{let e=t.get("inspector"),i=e.get("editors"),o=e.get("secondaryEditors");i.set("Litefyr.Style/ClipPathEditor",{component:ut}),o.set("Litefyr.Style/ClipPathEditorWrap",{component:ot}),i.set("Litefyr.Style/FontEditor",{component:bt}),o.set("Litefyr.Style/FontEditorWrap",{component:at})});})();
//# sourceMappingURL=Plugin.js.map
