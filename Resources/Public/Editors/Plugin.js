(()=>{var Yt=Object.create;var ut=Object.defineProperty;var Vt=Object.getOwnPropertyDescriptor;var zt=Object.getOwnPropertyNames;var qt=Object.getPrototypeOf,Tt=Object.prototype.hasOwnProperty;var dt=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,i)=>(typeof require<"u"?require:e)[i]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var Nt=(t,e)=>()=>(t&&(e=t(t=0)),e);var yt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ht=(t,e)=>{for(var i in e)ut(t,i,{get:e[i],enumerable:!0})},St=(t,e,i,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of zt(e))!Tt.call(t,l)&&l!==i&&ut(t,l,{get:()=>e[l],enumerable:!(o=Vt(e,l))||o.enumerable});return t};var w=(t,e,i)=>(i=t!=null?Yt(qt(t)):{},St(e||!t||!t.__esModule?ut(i,"default",{value:t,enumerable:!0}):i,t));function q(t){return(...e)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...e);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var M=Nt(()=>{});var A=yt((Se,Gt)=>{M();Gt.exports=q("vendor")().React});var $=yt((Je,wt)=>{M();wt.exports=q("NeosProjectPackages")().NeosUiDecorators});var H=yt((Me,vt)=>{M();vt.exports=q("NeosProjectPackages")().ReactUiComponents});M();var It=q("manifest");var T=w(A()),Xt=w($()),D=w(H());function Bt(t){var e,i,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(i=Bt(t[e]))&&(o&&(o+=" "),o+=i)}else for(i in t)t[i]&&(o&&(o+=" "),o+=i);return o}function Jt(){for(var t,e,i=0,o="",l=arguments.length;i<l;i++)(t=arguments[i])&&(e=Bt(t))&&(o&&(o+=" "),o+=e);return o}var f=Jt;var Y=w(A());var r={fontOutput:"litefyr-style-a90-4q-fontOutput",secondaryGrid:"litefyr-style-a90-4q-secondaryGrid",primaryWrapper:"litefyr-style-a90-4q-primaryWrapper",primaryButtons:"litefyr-style-a90-4q-primaryButtons",itemsCenter:"litefyr-style-a90-4q-itemsCenter",bgBlue:"litefyr-style-a90-4q-bgBlue","--primary-blue-hover":"--litefyr-style-a90-4q-primary-blue-hover",bgViolet:"litefyr-style-a90-4q-bgViolet",clipPathOutput:"litefyr-style-a90-4q-clipPathOutput",srOnly:"litefyr-style-a90-4q-srOnly",rangeLabel:"litefyr-style-a90-4q-rangeLabel",hidden:"litefyr-style-a90-4q-hidden",wFull:"litefyr-style-a90-4q-wFull",buttonPreview:"litefyr-style-a90-4q-buttonPreview",previewOutput:"litefyr-style-a90-4q-previewOutput","--primary-violet":"--litefyr-style-a90-4q-primary-violet",flex:"litefyr-style-a90-4q-flex",rangeIcon:"litefyr-style-a90-4q-rangeIcon",rangeOutput:"litefyr-style-a90-4q-rangeOutput",checboxLabel:"litefyr-style-a90-4q-checboxLabel",p0:"litefyr-style-a90-4q-p0",primaryDisabled:"litefyr-style-a90-4q-primaryDisabled","--primary-blue":"--litefyr-style-a90-4q-primary-blue",highlight:"litefyr-style-a90-4q-highlight",checkboxGrid:"litefyr-style-a90-4q-checkboxGrid",rangeEnableLabel:"litefyr-style-a90-4q-rangeEnableLabel",range:"litefyr-style-a90-4q-range",gap2:"litefyr-style-a90-4q-gap2","--rounded":"--litefyr-style-a90-4q-rounded",secondaryControls:"litefyr-style-a90-4q-secondaryControls",checkboard:"litefyr-style-a90-4q-checkboard","--highlight":"--litefyr-style-a90-4q-highlight","--contrast-neutral":"--litefyr-style-a90-4q-contrast-neutral","--contrast-darkest":"--litefyr-style-a90-4q-contrast-darkest",textLeft:"litefyr-style-a90-4q-textLeft",rounded:"litefyr-style-a90-4q-rounded",flexColumn:"litefyr-style-a90-4q-flexColumn",headlineOutput:"litefyr-style-a90-4q-headlineOutput",radio:"litefyr-style-a90-4q-radio",outputContent:"litefyr-style-a90-4q-outputContent"};var k=w(A());var Ct=w(H());var Ot="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var _=(t=21)=>{let e="",i=crypto.getRandomValues(new Uint8Array(t));for(;t--;)e+=Ot[i[t]&63];return e};function L({state:t,onCommit:e,property:i,enableProperty:o,label:l,min:n=0,max:a=100,step:u=1,minIcon:d,maxIcon:s,showValue:c=!1}){let m=_(),x=t[i],p=o?!!t[o]:!0,I=null;return c&&(I=typeof c=="function"?c(x):x),k.default.createElement("div",{className:r.range},o&&k.default.createElement("label",{className:f(r.rangeEnableLabel,r.checboxLabel)},k.default.createElement(Ct.CheckBox,{onChange:W=>{e({[o]:W})},isChecked:p}),k.default.createElement("span",null,l," ",I)),k.default.createElement("label",{htmlFor:m,className:o?r.srOnly:r.rangeLabel},l," ",I),p&&k.default.createElement("div",{className:f(r.flex,r.itemsCenter,r.gap2)},k.default.createElement("div",{className:r.rangeIcon},d),k.default.createElement("input",{type:"range",id:m,min:n,max:a,value:x,step:u,onChange:({target:W})=>{e({[i]:W.valueAsNumber})}}),k.default.createElement("div",{className:r.rangeIcon},s)))}var G={};Ht(G,{AngleHigh:()=>le,AngleLow:()=>re,ArrowDown:()=>Et,ArrowLeft:()=>Kt,ArrowRight:()=>$t,ArrowUp:()=>Rt,Circle:()=>Mt,Mountain:()=>Ut,Peak:()=>_t,PeakHigh:()=>oe,PeakLow:()=>ie,Square:()=>Qt,Wave:()=>Dt,WaveHigh:()=>ee,WaveLow:()=>te});var b=w(A());function Qt({size:t=24}){return b.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t},b.default.createElement("rect",{strokeWidth:"2",fill:"none",stroke:"currentColor",x:"1",y:"1",width:"22",height:"22"}))}function Mt({size:t=24}){return b.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t},b.default.createElement("circle",{strokeWidth:"2",stroke:"currentColor",fill:"none",cx:"12",cy:"12",r:"11"}))}function Dt({size:t=24}){return b.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t},b.default.createElement("path",{fill:"none",fillRule:"nonzero",stroke:"currentcolor",strokeLinecap:"round",strokeWidth:"2",d:"M1 13.04l1.222 2.586c1.222 2.634 3.667 5.757 6.111 3.779 2.445-1.979 3.89-13.01 7.334-14.988 2.296-1.32 4.74 1.485 7.333 8.412"}))}function Ut({size:t=24}){return b.default.createElement("svg",{viewBox:"0 0 752 752",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",width:t,height:t},b.default.createElement("path",{d:"M409.71 224.23c-3.05.04-6.2 1.863-8.434 5.18l-84.949 145.77-25.16-43.363c-1.59-2.762-4.66-4.614-7.843-4.735-3.434-.136-6.868 1.758-8.586 4.735l-104.78 180.26c-5.64 9.367.43 15.703 9.027 15.688h396.03c6.59-.047 11.434-8.5 8.14-14.207l-165.46-284.15c-1.992-3.465-4.94-5.215-7.992-5.18zm-4.438 60.676a9.471 9.471 0 0 1 8.731 4.883l77.551 132.45v.004a9.516 9.516 0 0 1-3.406 13.023 9.516 9.516 0 0 1-13.023-3.406l-77.551-132.6h.004a9.473 9.473 0 0 1 7.695-14.356z",fillRule:"evenodd"}))}function Rt({size:t=24}){return b.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",width:t,height:t},b.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19.5v-15m0 0l-6.75 6.75M12 4.5l6.75 6.75"}))}function Et({size:t=24}){return b.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",width:t,height:t},b.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5L12 21m0 0l-7.5-7.5M12 21V3"}))}function Kt({size:t=24}){return b.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",width:t,height:t},b.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75"}))}function $t({size:t=24}){return b.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",width:t,height:t},b.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75"}))}function _t({size:t=24}){return b.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t},b.default.createElement("path",{fill:"none",fillRule:"nonzero",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 13.3142857L8 20 16 4 23 11.8857143"}))}function te({size:t=24}){return b.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t},b.default.createElement("path",{fill:"none",fillRule:"nonzero",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 13.247l1.833-.876c1.834-.876 5.5-2.63 9.167-2.339 3.667.312 7.333 2.613 9.167 3.801L23 15"}))}function ee({size:t=24}){return b.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t},b.default.createElement("path",{fill:"none",fillRule:"nonzero",stroke:"currentcolor",strokeLinecap:"round",strokeWidth:"2",d:"M1 13.736C2.04 11.933 3.09 5.049 4.146 5c.659.031 1.324 2.817 1.985 5.531.38 1.561.76 3.098 1.138 4.073 1.059 2.574 2.113.935 3.146-.868 1.057-1.803 2.113-3.442 3.146-3.491 1.055.049 2.114 1.688 3.146 4.36 1.052 2.573 2.09 6.178 3.147 5.244 1.05-.869 2.09-6.113 2.618-8.736L23 8.491"}))}function ie({size:t=24}){return b.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t},b.default.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"currentcolor",strokeLinecap:"round",strokeWidth:"2",d:"M5 16l14-7"}))}function oe({size:t=24}){return b.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t},b.default.createElement("path",{fill:"none",fillRule:"nonzero",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 21.3703704L4.66666667 7.51851852 8.33333333 21.3703704 12 4.25925926 15.6666667 19.7407407 19.3333333 1 23 23"}))}function re({size:t=24}){return b.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",fill:"currentColor",width:t,height:t},b.default.createElement("path",{d:"M316.3 79l15-28.3L274.7 20.7 259.7 49 56.5 433 31.7 480H84.8 480h32V416H480 137.9L316.3 79zM302.7 173l-22.8 43c22.5 17.9 42.3 38.9 58.8 62.5l40.8-25.3c-21.1-30.7-47.1-57.8-76.8-80.2zm82.3 211h49c-7-37-19.8-71.9-37.6-103.7l-40.8 25.3c13.3 24.2 23.3 50.5 29.4 78.3z"}))}function le({size:t=24}){return b.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor",width:t,height:t},b.default.createElement("path",{d:"M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64V448c0 17.7 14.3 32 32 32H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H64V64zM96 97.6v48.3c31 3.6 60.4 12.5 87.4 25.7l25.3-41.1C174.2 113 136.2 101.6 96 97.6zm115.2 89.7c32.6 21 60.5 48.9 81.5 81.5l40.9-25.2c-25-39-58.2-72.2-97.2-97.2l-25.2 40.9zM334.1 384h48.3c-4-40.2-15.4-78.2-32.9-112.6l-41 25.3c13.2 26.9 22 56.3 25.7 87.4z"}))}function et(t){let{height:e,offset:i,amplitude:o,frequency:l,points:n,phase:a,asyncPhaseEnable:u,asyncPhase:d}=t,s=n;s>6&&(s={7:100,8:150,9:200,10:300}[n]||300);let c=2*Math.PI*(l*-1)/s,m=a*Math.PI/180,x=Wt({scaledPoints:s,offset:i,amplitude:o,units:c,radPhase:m,height:e}),p=u?Wt({scaledPoints:s,offset:i,amplitude:o,units:c,radPhase:d*Math.PI/180,height:e}):x;return{...t,top:x,bottom:p}}function Wt({scaledPoints:t,offset:e,amplitude:i,units:o,radPhase:l,height:n}){let a=[];for(let u=0;u<=t;u++){let d=e+i*Math.cos(u*o+l),s=u*100/t,c=d/n*100;a.push(`${s.toFixed(2)}% ${c.toFixed(2)}%`)}return a.join(",")}function tt(t,e=!0){return e?`polygon(100% 100%,0% 100%,${t})`:`polygon(100% 0%,0% 0%,${t})`}function S({state:t,label:e,topColor:i,bottomColor:o}){let{width:l,height:n,top:a,bottom:u,asyncPhaseEnable:d}=t;if(!a||!u)return"";let s=`${l}  / ${n}`,c=`${n/l*-100}%`;return Y.default.createElement("div",{className:f(r.checkboard,r.clipPathOutput)},Y.default.createElement("div",{style:{position:"relative",zIndex:2}},Y.default.createElement("div",{className:r.bgBlue,style:{backgroundColor:i,aspectRatio:s,clipPath:tt(a),marginBottom:"-1px"}}),Y.default.createElement("h1",{style:{backgroundColor:i},className:f(r.outputContent,r.bgBlue)},e),Y.default.createElement("div",{className:r.bgBlue,style:{backgroundColor:i,aspectRatio:s,clipPath:tt(u,!1)}})),d&&Y.default.createElement("div",{style:{position:"relative",zIndex:1}},Y.default.createElement("div",{className:r.bgViolet,style:{backgroundColor:o,aspectRatio:s,clipPath:tt(a),marginTop:c,marginBottom:"-1px",zIndex:-1}}),Y.default.createElement("h1",{style:{backgroundColor:o},className:f(r.outputContent,r.bgViolet)},e),Y.default.createElement("div",{className:r.bgViolet,style:{backgroundColor:o,aspectRatio:s,clipPath:tt(u,!1)}})))}var g=w(A());function it({state:t,onCommit:e,labels:i}){let o={wave:{min:g.default.createElement(G.WaveLow,null),max:g.default.createElement(G.WaveHigh,null)},peak:{min:g.default.createElement(G.PeakLow,null),max:g.default.createElement(G.PeakHigh,null)}};return g.default.createElement("div",{className:r.secondaryControls},g.default.createElement(L,{state:t,onCommit:e,property:"width",label:i.width,min:200,max:1400,minIcon:g.default.createElement("div",{className:f(r.flex)},g.default.createElement(G.ArrowRight,{size:"12"}),g.default.createElement(G.ArrowLeft,{size:"12"})),maxIcon:g.default.createElement("div",{className:f(r.flex)},g.default.createElement(G.ArrowLeft,{size:"12"}),g.default.createElement(G.ArrowRight,{size:"12"}))}),g.default.createElement(L,{state:t,onCommit:e,property:"height",label:i.height,min:20,max:500,minIcon:g.default.createElement("div",{className:f(r.flex,r.flexColumn)},g.default.createElement(G.ArrowDown,{size:"12"}),g.default.createElement(G.ArrowUp,{size:"12"})),maxIcon:g.default.createElement("div",{className:f(r.flex,r.flexColumn)},g.default.createElement(G.ArrowUp,{size:"12"}),g.default.createElement(G.ArrowDown,{size:"12"}))}),g.default.createElement(L,{state:t,onCommit:e,property:"offset",label:i.offset,min:1,max:250,minIcon:g.default.createElement(G.ArrowDown,null),maxIcon:g.default.createElement(G.ArrowUp,null)}),g.default.createElement(L,{state:t,onCommit:e,property:"amplitude",label:i.amplitude,min:1,max:200,minIcon:g.default.createElement(G.Mountain,null),maxIcon:g.default.createElement(G.Mountain,{size:"48"})}),g.default.createElement(L,{state:t,onCommit:e,property:"frequency",label:i.frequency,min:.1,max:10,step:.1,minIcon:o[t.points<7?"peak":"wave"].min,maxIcon:o[t.points<7?"peak":"wave"].max}),g.default.createElement(L,{state:t,onCommit:e,property:"points",label:i.points,min:1,max:10,step:1,minIcon:g.default.createElement(G.Peak,null),maxIcon:g.default.createElement(G.Wave,null)}),g.default.createElement(L,{state:t,onCommit:e,property:"phase",label:i.phase,min:-180,max:180,step:5,minIcon:g.default.createElement(G.AngleLow,null),maxIcon:g.default.createElement(G.AngleHigh,null)}),g.default.createElement(L,{state:t,onCommit:e,property:"asyncPhase",enableProperty:"asyncPhaseEnable",label:i.asyncPhase,min:-180,max:180,step:5,minIcon:g.default.createElement(G.AngleLow,null),maxIcon:g.default.createElement(G.AngleHigh,null)}))}var ne=(0,Xt.neos)(t=>({i18nRegistry:t.get("i18n"),secondaryEditorsRegistry:t.get("inspector").get("secondaryEditors")})),se={allowEmpty:!0,disabled:!1};function ae(t){let{allowEmpty:e,disabled:i,topColor:o,bottomColor:l}={...se,...t.options},{value:n,commit:a,highlight:u,i18nRegistry:d,renderSecondaryInspector:s,secondaryEditorsRegistry:c}=t;function m(I){a(I)}function x(){s("LITEFYR_CLIPPATH_EDIT",()=>null),a({...n,top:null,bottom:null})}function p(){let{component:I}=c.get("Litefyr.Style/ClipPathEditorWrap");s("LITEFYR_CLIPPATH_EDIT",()=>T.default.createElement(I,{onChange:m,value:n,topColor:o,bottomColor:l,i18nRegistry:d}))}return T.default.createElement("div",{className:f(r.primaryWrapper,i&&r.primaryDisabled)},n.top&&T.default.createElement("button",{type:"button",className:f(r.previewOutput,u&&r.highlight),onClick:p},T.default.createElement(S,{state:n,topColor:o,bottomColor:l}),T.default.createElement(D.Icon,{icon:"pencil",size:"5x",mask:["fas","circle"],transform:"shrink-8"})),T.default.createElement("div",{className:r.primaryButtons},T.default.createElement(D.IconButton,{className:f(!n.top&&u&&r.highlight),style:"lighter",icon:"pencil",title:"Edit",onClick:p}),e&&T.default.createElement(D.IconButton,{style:"lighter",icon:"times",title:"Reset",onClick:x})))}var gt=ne(ae);var N=w(A());function ot({onChange:t,value:e,topColor:i,bottomColor:o,i18nRegistry:l}){let[n,a]=(0,N.useState)({width:1200,height:140,offset:70,amplitude:60,frequency:1.5,points:7,phase:0,asyncPhaseEnable:!1,asyncPhase:0,top:null,bottom:null});function u({width:c,height:m,offset:x,amplitude:p,frequency:I,points:W,phase:O,asyncPhaseEnable:C,asyncPhase:F}){c==null&&(c=n.width),m==null&&(m=n.height),x==null&&(x=n.offset),p==null&&(p=n.amplitude),I==null&&(I=n.frequency),W==null&&(W=n.points),O==null&&(O=n.phase),C==null&&(C=!!n.asyncPhaseEnable),F==null&&(F=n.asyncPhase);let z=et({width:c,height:m,offset:x,amplitude:p,frequency:I,points:W,phase:O,asyncPhaseEnable:C,asyncPhase:F});a(z),t(z)}(0,N.useEffect)(()=>{let c=et({...n,...e});a(c),(!e.top||!e.bottom)&&t(c)},[]);let d=["content","width","height","offset","amplitude","frequency","points","phase","asyncPhaseEnable","asyncPhase"],s={};return d.forEach(c=>{s[c]=l.translate(`Litefyr.Style:NodeTypes.Mixin.Visuals.ClipPath:editor.${c}`)}),N.default.createElement("div",{className:r.secondaryGrid},N.default.createElement(it,{state:n,onCommit:u,labels:s}),N.default.createElement(S,{state:n,label:s.content,topColor:i,bottomColor:o}))}var j=w(A()),Zt=w($()),J=w(H());var ce=(0,Zt.neos)(t=>({i18nRegistry:t.get("i18n"),config:t.get("frontendConfiguration").get("LitefyrStyleEditorsFont"),secondaryEditorsRegistry:t.get("inspector").get("secondaryEditors")})),ue={type:"main",allowEmpty:!1,disabled:!1,roundedButton:0,colors:[],mainFont:{}};function de(t){let e={...ue,...t.config,...t.options},{value:i,commit:o,highlight:l,i18nRegistry:n,renderSecondaryInspector:a,secondaryEditorsRegistry:u}=t,{allowEmpty:d,disabled:s}=e;function c(p){if(p){o(p);return}o({})}function m(){a("LITEFYR_FONT_EDIT",()=>null),o({})}function x(){let{component:p}=u.get("Litefyr.Style/FontEditorWrap");a("LITEFYR_FONT_EDIT",()=>j.default.createElement(p,{onChange:c,value:i,options:e,i18nRegistry:n}))}return j.default.createElement("div",{className:f(r.primaryButtons,s&&r.primaryDisabled)},j.default.createElement(J.Button,{onClick:x,style:"lighter",className:f(r.wFull,r.textLeft,r.rounded,l&&r.highlight)},j.default.createElement(J.Icon,{icon:"pencil",size:"1x",padded:"right"}),i.font),d&&j.default.createElement(J.IconButton,{style:"lighter",icon:"times",title:"Reset",onClick:m}))}var ft=ce(de);var V=w(A());var h=w(A());var Q=w(A());var Pt=w(H());function U({value:t,label:e,min:i=0,max:o=100,step:l=1,onChange:n,onReset:a}){let u=_();return Q.default.createElement("div",{className:r.range},Q.default.createElement("label",{htmlFor:u,className:r.flex},e,": ",t),Q.default.createElement("div",{className:f(r.flex,r.itemsCenter,r.gap2)},Q.default.createElement("input",{type:"range",id:u,min:i,max:o,value:t,step:l,onChange:({target:d})=>n(d.valueAsNumber)}),a&&Q.default.createElement(Pt.IconButton,{style:"lighter",icon:"times",title:"Reset",onClick:a})))}var E=w(H());var bt;async function ye(t,e={}){let{folder:i,fonts:o}=e,l=o[t];if(!bt){await import("/_Resources/Static/Packages/Litefyr.Style/Editors/Inflate.js"),await import("/_Resources/Static/Packages/Litefyr.Style/Editors/Unbrotli.js");let{Font:u}=await import("/_Resources/Static/Packages/Litefyr.Style/Editors/FontLib.js");bt=u}let n=null;l.fontWeight&&typeof l.fontWeight!="string"&&(n=Array.isArray(l.fontWeight)?l.fontWeight:[l.fontWeight]);let a=l?.filepath;if(!a){let u=n?`${t}-${n[0]}`:t;a=`${i}/${u}.woff2`}return new Promise((u,d)=>{let s=new bt(t);s.onerror=c=>d(c),s.onload=async c=>{let m=await ge(c);m.fontWeight.options=n,u(m)},s.src=a})}function ge(t){let e=t.detail.font,i=!!e.opentype.tables.fvar,o=[],l=e.opentype.tables.GSUB;l&&(l.getSupportedScripts().forEach(d=>{let s=l.getScriptTable(d);l.getSupportedLangSys(s).forEach(m=>{let x=l.getLangSysTable(d,m);o=[...o,...l.getFeatures(x).map(p=>p.featureTag)]})}),o=[...new Set(o)]);let n={},a={options:null,range:null};if(i){let u=e.opentype.tables.fvar.getSupportedAxes(),d=e.opentype.tables.fvar.axes;d=d.filter(s=>u.includes(s.tag)),d.forEach(s=>{if(s.tag==="wght"){a.range={min:s.minValue,max:s.maxValue,default:s.defaultValue};return}n[s.tag]={tag:s.tag,min:s.minValue,max:s.maxValue,default:s.defaultValue}})}return{fontFeatureSettings:o,fontVariationSettings:n,variable:i,fontWeight:a}}var R=ye;function lt({i18nRegistry:t,state:e,onCommit:i,config:o,setRangePreview:l,allowEmpty:n=!0,enableBold:a=!0}){let{fonts:u}=o,d=[];for(let y in u)d.push({value:y,label:y,group:u[y].group});let s=e?.features?.fontVariationSettings||{};function c(y,B){let v=F();v.fontVariationSettings[y]=B;let P=rt(v);i({userSettings:v,style:P})}let m=e?.features?.fontFeatureSettings||[];function x(y,B){let v=F(),P=v.fontFeatureSettings;B?P.push(y):P=P.filter(ct=>ct!==y),v.fontFeatureSettings=[...new Set(P)];let K=rt(v);i({userSettings:v,style:K})}let p=e?.features?.variable,I=p?e?.features?.fontWeight?.range:null,W=p?[]:e?.features?.fontWeight?.options,O=W&&W.length>1?W:null;function C(y,B){let v=JSON.parse(JSON.stringify(e.userSettings));v.fontWeight[y]=B;let P=rt(v);i({userSettings:v,style:P})}let F=()=>JSON.parse(JSON.stringify(e.userSettings)),z=["characterListing","typeface","normalFontWeight","boldFontWeight"],Z={};return z.forEach(y=>{Z[y]=t.translate(`Litefyr.Style:NodeTypes.Mixin.Fonts:editor.${y}`)}),h.default.createElement("div",{className:r.secondaryControls,style:{maxWidth:"300px"}},h.default.createElement("label",{className:f(r.checboxLabel)},h.default.createElement(E.CheckBox,{onChange:l,isChecked:!!e?.rangePreview}),h.default.createElement("span",null,Z.characterListing)),h.default.createElement("div",{className:f(r.flex,r.flexColumn,r.gap2)},h.default.createElement("div",null,Z.typeface),h.default.createElement(E.SelectBox,{allowEmpty:n,displaySearchBox:!1,options:d,value:e.font,onValueChange:async y=>{if(!y){i();return}let B=await R(y,o),v=B.fontWeight,P=B.variable,K=P?v.range.default:v.options[0],ct=P?At(K,v.range.max):v.options[v.options.length-1],ht={font:y,variable:P,fontVariationSettings:fe(B.fontVariationSettings),fontFeatureSettings:[],fontWeight:{normal:K,bold:ct}},kt=rt(ht);i({font:y,features:B,userSettings:ht,style:kt})}})),I&&h.default.createElement(h.default.Fragment,null,h.default.createElement(U,{min:I.min,max:I.max,value:e.userSettings.fontWeight.normal,label:Z.normalFontWeight,step:5,onChange:y=>C("normal",y),onReset:()=>C("normal",I.default)}),a&&h.default.createElement(U,{min:I.min,max:I.max,value:e.userSettings.fontWeight.bold,label:Z.boldFontWeight,step:5,onChange:y=>C("bold",y),onReset:()=>C("bold",At(I.default,I.max))})),O&&h.default.createElement(h.default.Fragment,null,h.default.createElement("div",{className:f(r.flex,r.flexColumn,r.gap2)},h.default.createElement("div",null,Z.normalFontWeight),O.map(y=>h.default.createElement("label",{className:r.radio},h.default.createElement("input",{type:"radio",name:"weightNormal",value:y,checked:e.userSettings.fontWeight.normal==y,onChange:()=>C("normal",y)}),h.default.createElement("span",null),y))),a&&h.default.createElement("div",{className:f(r.flex,r.flexColumn,r.gap2)},h.default.createElement("div",null,Z.boldFontWeight),O.map(y=>h.default.createElement("label",{className:r.radio},h.default.createElement("input",{type:"radio",name:"weightBold",value:y,checked:e.userSettings.fontWeight.bold==y,onChange:()=>C("bold",y)}),h.default.createElement("span",null),y)))),Object.entries(s).map(([y,B])=>h.default.createElement(U,{min:B.min,max:B.max,value:e.userSettings.fontVariationSettings[y],label:y,step:1,onChange:v=>c(y,v),onReset:()=>c(y,B.default)})),h.default.createElement("div",{className:r.checkboxGrid},m.map(y=>h.default.createElement("label",{className:f(r.checboxLabel)},h.default.createElement(E.CheckBox,{onChange:B=>x(y,B),isChecked:e.userSettings.fontFeatureSettings.includes(y)}),h.default.createElement("span",null,y)))))}function fe(t){let e={};for(let i in t){let o=t[i];e[i]=o.value||o.default}return e}function At(t,e){return Math.min(t+300,e)}function rt({font:t,fontVariationSettings:e,fontFeatureSettings:i,fontWeight:o}){let l={fontFamily:t,fontWeight:o.normal,fontFeatureSettings:i&&i.length?i.map(a=>`"${a}"`).join(","):"normal"},n=[];return Object.entries(e).forEach(([a,u])=>{n.push(`"${a}" ${u}`)}),l.fontVariationSettings=n.length?n.join(","):"normal",{normal:l,bold:{fontWeight:o.bold}}}function nt(t={},e=!0){let{fonts:i,fallback:o,folder:l}=t,n=({font:d,filepath:s,weight:c,fixedWeight:m=!1})=>{if(!s){let I=m&&c?`${d}-${c}`:d;s=`${l}/${I}.woff2`}let x=s.split(".").pop(),p=c?`font-weight:${c};`:"";return`@font-face{font-family:${d};${p}font-style:normal;font-display:swap;src:url("${s}") format("${x}")}`},a="";return Object.keys(i).map(d=>{let{filepath:s,fontWeight:c,group:m}=i[d],x="";if(Array.isArray(c)?c.forEach(p=>{x+=n({font:d,filepath:s,weight:p,fixedWeight:!0})}):typeof c=="number"?x+=n({font:d,filepath:s,weight:c,fixedWeight:!0}):x+=n({font:d,filepath:s,weight:c,fixedWeight:!1}),e){let p=`'${d}', ${o[m]}`;a+=`span[title="${d}"],.font-${d}{font-family:${p}}`}return x}).join("")+a}var X=w(A()),Ft=w($());var pt={"--tw-text-l-offset":"--litefyr-style-1PBTPq-tw-text-l-offset","--font-button--variation":"--litefyr-style-1PBTPq-font-button--variation","--color-accent-h":"--litefyr-style-1PBTPq-color-accent-h","--font-button":"--litefyr-style-1PBTPq-font-button","--fluid-bp":"--litefyr-style-1PBTPq-fluid-bp","--fluid-screen":"--litefyr-style-1PBTPq-fluid-screen","--rounded-button":"--litefyr-style-1PBTPq-rounded-button","--color-back-c":"--litefyr-style-1PBTPq-color-back-c","--tw-bg-l-offset":"--litefyr-style-1PBTPq-tw-bg-l-offset","--color-front-h":"--litefyr-style-1PBTPq-color-front-h","--fluid-max-width":"--litefyr-style-1PBTPq-fluid-max-width","btn--ghost":"litefyr-style-1PBTPq-btn--ghost","--font-weight-bold":"--litefyr-style-1PBTPq-font-weight-bold","--tw-text-h":"--litefyr-style-1PBTPq-tw-text-h","--color-back-h":"--litefyr-style-1PBTPq-color-back-h","--tw-content":"--litefyr-style-1PBTPq-tw-content","btn--link":"litefyr-style-1PBTPq-btn--link","btn--inline":"litefyr-style-1PBTPq-btn--inline","--fluid-min-width":"--litefyr-style-1PBTPq-fluid-min-width","--f-sm":"--litefyr-style-1PBTPq-f-sm","btn--theme":"litefyr-style-1PBTPq-btn--theme","--tw-bg-c":"--litefyr-style-1PBTPq-tw-bg-c","--tw-bg-h":"--litefyr-style-1PBTPq-tw-bg-h","--color-accent-c":"--litefyr-style-1PBTPq-color-accent-c",btn:"litefyr-style-1PBTPq-btn","--btn-bg":"--litefyr-style-1PBTPq-btn-bg","--tw-text-opacity":"--litefyr-style-1PBTPq-tw-text-opacity","--btn-text":"--litefyr-style-1PBTPq-btn-text","--color-accent-l":"--litefyr-style-1PBTPq-color-accent-l","--tw-bg-l":"--litefyr-style-1PBTPq-tw-bg-l","--color-front-l":"--litefyr-style-1PBTPq-color-front-l","btn--big-area":"litefyr-style-1PBTPq-btn--big-area","--font-button--feature":"--litefyr-style-1PBTPq-font-button--feature","--tw-text-c":"--litefyr-style-1PBTPq-tw-text-c","btn--block":"litefyr-style-1PBTPq-btn--block","--color-back-l":"--litefyr-style-1PBTPq-color-back-l","--color-front-c":"--litefyr-style-1PBTPq-color-front-c","--tw-text-l":"--litefyr-style-1PBTPq-tw-text-l","--tw-bg-opacity":"--litefyr-style-1PBTPq-tw-bg-opacity"};var be=(0,Ft.neos)(t=>({colorConfig:t.get("frontendConfiguration").get("CarbonTailwindColors")})),mt=be(pe);function pe({text:t,style:e,type:i,colors:o}){let l=Lt(t,"blockquote").map(({tagName:a,text:u})=>({tagName:a,text:Lt(u,"strong")})),n=i==="button";return o=o.filter(a=>!!a),X.default.createElement(X.Fragment,null,n&&X.default.createElement("div",{className:r.buttonPreview},o.map((a,u)=>X.default.createElement("button",{key:u,type:"button","data-theme":"main",style:{...e.normal,cursor:"auto",backgroundColor:a,color:"white"},class:f(pt.btn,pt["btn--inline"])},t))),!n&&X.default.createElement("div",{style:e.normal},l.map(({tagName:a,text:u},d)=>a==="blockquote"?X.default.createElement("blockquote",{key:d},u.map(({tagName:s,text:c},m)=>s==="strong"?X.default.createElement("strong",{key:m,style:e.bold},st(c)):st(c))):u.map(({tagName:s,text:c},m)=>s==="strong"?X.default.createElement("strong",{key:m,style:e.bold},st(c)):st(c)))))}function st(t){return t.split(/<br\s*\/?>/gi).map((e,i)=>X.default.createElement(X.Fragment,{key:i},i!==0&&X.default.createElement("br",null),e))}function Lt(t,e="strong"){let i=[],o=`</${e}>`;return t.split(`<${e}>`).forEach(l=>{if(l.includes(o)){let[n,a]=l.split(o);n&&i.push({tagName:e,text:n}),a&&i.push({tagName:null,text:a});return}l&&i.push({tagName:null,text:l})}),i}function at({onChange:t,value:e,options:i,i18nRegistry:o}){let[l,n]=(0,V.useState)({font:null,features:{},userSettings:{},style:{},rangePreview:!1});function a(O){if(!O){let B={font:null,features:{},userSettings:{},style:{normal:{},bold:{}},rangePreview:l.rangePreview};n(B),t();return}let{font:C,features:F,userSettings:z,style:Z}=O;C==null&&(C=l.font),F==null&&(F=l.features),z==null&&(z=l.userSettings),Z==null&&(Z=l.style);let y=l.rangePreview;n({font:C,features:F,userSettings:z,style:Z,rangePreview:y}),t({font:C,userSettings:z,style:Z})}function u(O){n({...l,rangePreview:!!O})}(0,V.useEffect)(()=>{async function O(){if(e?.font){let C=await R(e.font,i);n({...l,...e,features:C})}}O()},[]);let d="litefyr-font-preview",s=(()=>{let O=i?.roundedButton||0;return O>=26?"9999px":O/16+"rem"})(),c=`.${d} button{border-radius:${s} !important}`,m=nt(i),x=i.type!=="button",p=l.rangePreview?"range":i.type,I=i?.mainFont?.style?me(i.mainFont.style,d):"",W=o.translate(`Litefyr.Style:NodeTypes.Mixin.Fonts:editor.preview.${p}`);return V.default.createElement("div",{className:r.secondaryGrid},V.default.createElement("style",null,I,m,c),V.default.createElement(lt,{state:l,onCommit:a,config:i,setRangePreview:u,enableBold:x,allowEmpty:i.allowEmpty,i18nRegistry:o}),V.default.createElement("div",{className:f(d,r[p+"Output"],r.fontOutput)},V.default.createElement(mt,{text:W,style:l.style,type:i.type,colors:i?.colors})))}function me({normal:t,bold:e},i){if(!t)return"";let o=[`font-family:${t.fontFamily}`,`font-weight:${t.fontWeight}`,`font-feature-settings:${t.fontFeatureSettings}`,`font-variation-settings:${t.fontVariationSettings}`].join(";"),l=`font-weight:${e.fontWeight}`;return`.${i}{${o}}.${i} strong{${l}}`}It("Litefyr.Style:Editors",{},t=>{let e=t.get("inspector"),i=e.get("editors"),o=e.get("secondaryEditors");i.set("Litefyr.Style/ClipPathEditor",{component:gt}),o.set("Litefyr.Style/ClipPathEditorWrap",{component:ot}),i.set("Litefyr.Style/FontEditor",{component:ft}),o.set("Litefyr.Style/FontEditorWrap",{component:at})});})();
//# sourceMappingURL=Plugin.js.map
